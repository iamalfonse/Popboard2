$(document).ready(function(){$(".enterBirthday").birthdaypicker({maxAge:100});$("body").on("change","#profileimg",function(){ajaxFileUpload()}).on("click",".btn.cancel",function(){$(".error-overlay").remove()}).on("click",".jcropCancel",function(){$(".jcropOverlay").fadeOut(500)});$("#uploadphoto").click(function(){$("#profileimg").click()})});ajaxFileUpload=function(){console.log("start ajax upload ");$.ajaxFileUpload({url:"../doajaxfileupload.php",secureuri:!1,fileElementId:"profileimg",dataType:"json",data:{name:"logan",id:"id"},success:function(e,t){if(typeof e.uploaderror!="undefined")if(e.uploaderror!="")showError(e.uploaderror);else{console.log("filesize: "+e.filesize);console.log("width: "+e.imagesize_w);console.log("height: "+e.imagesize_h);console.log("image URL: "+e.filedir);showjCrop(e.filedir)}},error:function(e,t,n){console.log("Error: "+e.uploaderror);e.uploaderror==undefined}});return!1};showjCrop=function(e){$(".jcropOverlay").fadeIn(500);$(".jcropContainer .mainImg").append('<img src="'+e+'" id="target" />');$(".preview-container").append('<img src="'+e+'" class="jcrop-preview" alt="Preview" />');var t,n,r,i=$("#preview-pane"),s=$("#preview-pane .preview-container"),o=$("#preview-pane .preview-container img"),u=s.width(),a=s.height();console.log("init",[u,a]);$("#target").Jcrop({onChange:updatePreview,onSelect:updatePreview,aspectRatio:u/a},function(){var e=this.getBounds();n=e[0];r=e[1];t=this})};updatePreview=function(e){if(parseInt(e.w)>0){var t=xsize/e.w,n=ysize/e.h;$pimg.css({width:Math.round(t*boundx)+"px",height:Math.round(n*boundy)+"px",marginLeft:"-"+Math.round(t*e.x)+"px",marginTop:"-"+Math.round(n*e.y)+"px"})}};showError=function(e){$("body").append('<div class="error-overlay"><div class="error-container"><p>'+e+'</p><button class="btn cancel">Close</button></div></div>')};